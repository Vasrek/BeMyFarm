<html>
<head>
  <meta charset="UTF-8">
  <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
  <script src="https://rawgit.com/mayognaise/aframe-mouse-cursor-component/master/dist/aframe-mouse-cursor-component.min.js"></script>
  <script src="https://unpkg.com/aframe-layout-component@3.x.x/dist/aframe-layout-component.min.js"></script>
  <script src="https://unpkg.com/aframe-event-set-component@3.x.x/dist/aframe-event-set-component.min.js"></script>
  <script src="https://npmcdn.com/aframe-animation-component@3.0.1"></script>
  <script src="components/set-image.js"></script>
</head>
<body>
  <a-scene>
    <a-asset>
      <img id="i-vigneron" crossorigin="anonymous" src="image/producteur.png">
      <img id="i-vigneron-black" crossorigin="anonymous" src="image/producteur_black.png">
      <img id="bouteille" crossorigin="anonymous" src="image/bouteille blanc_nohalo.png">
      <img id="bouteille2" crossorigin="anonymous" src="image/bouteille rouge_nohalo.png">
      <img id="bouteilleHOVER" crossorigin="anonymous" src="image/bouteille blanc_halo.png">
      <img id="bouteille2HOVER" crossorigin="anonymous" src="image/bouteille rouge_halo.png">
      <img id="i-fond" crossorigin="anonymous" src="image/Photo Intro.png">
      <img id="i-360-1" crossorigin="anonymous" src="image/Vigne visite racine.png">
      <img id="i-360-1-black" crossorigin="anonymous" src="image/Vigne visite_Noir.png">
      <img id="i-360-2" crossorigin="anonymous" src="image/interieur cave.png">
      <img id="i-360-2-black" crossorigin="anonymous" src="image/interieur cave_Noir.png">
      <img id="i-360-3" crossorigin="anonymous" src="image/Fabrication.png">
      <img id="i-360-3-black" crossorigin="anonymous" src="image/Fabrication_Noir.png">
      <img id="i-back" crossorigin="anonymous" src="image/back.png">
      <img id="popup1" crossorigin="anonymous" src="image/etiquette_vin.png">
      <img id="popup2" crossorigin="anonymous" src="image/etiquette_vin_2.png">
      <img id="close1" crossorigin="anonymous" src="image/popupbouteille1X.png">
      <img id="close2" crossorigin="anonymous" src="image/popupbouteille2X.png">
      <img id="cadre" crossorigin="anonymous" src="image/cadre.png">
      <img id="i-play" crossorigin="anonymous" src="image/i-play.png">
	  <img id="i-drone" crossorigin="anonymous" src="image/vue aerienne.png">
	  <img id="logo" crossorigin="anonymous" src="image/by carrefour.png">
	  <img id="itw-producteur" crossorigin="anonymous" src="image/itw producteur.png">
	  <img id="wine" crossorigin="anonymous" src="image/nos vins.png">
	  <img id="visite" crossorigin="anonymous" src="image/visite virtuelle.png">
	  <video id="v-drone" autoplay loop src="Video/drone vignes.mp4" webkit-playsinline>
      <video id="v-interview" autoplay loop="true" muted src="video/itw_winemaker_videoHD.mp4"></video>

	</a-asset>

    <!-- SkyBox -->
    <a-sky id="fond" radius="20" src="#i-fond"></a-sky>

    <!-- Image -->
    <a-image id="vigneron" src="#i-vigneron-black" width="4" height="6" position="0 2 -7"   event-set__1="_event: mouseenter; src: #i-vigneron" event-set__2="_event: mouseleave; src: #i-vigneron-black"></a-image>
    <a-image id="cadreBottles" src="#cadre" scale="14 8.5 0" position="-0.85 1 8.623" rotation="0 180 0"></a-image>
    <a-image id="bouteille1" src="#bouteille2" width="1" height="4" position="-5 2 8" rotation="0 0 0" event-set__1="_event: mouseenter; src: #bouteille2HOVER" event-set__2="_event: mouseleave; src: #bouteille2"></a-image>
    <a-image id="bouteille-2" src="#bouteille" width="1" height="4" position="-1 2 8" rotation="0 0 0" event-set__1="_event: mouseenter; src: #bouteilleHOVER" event-set__2="_event: mouseleave; src: #bouteille"></a-image>
    <a-image id="bouteille-3" src="#bouteille2" width="1" height="4" position="3 2 8" rotation="0 0 0" event-set__1="_event: mouseenter; src: #bouteille2HOVER" event-set__2="_event: mouseleave; src: #bouteille2"></a-image>
    <a-image id="back" src="#i-back" width="1" height="1" position="-9.687 0.000 -0.285" rotation="0 83.824 0" visible="false" set-image="on: click; target: #fond; src: #i-fond"></a-image>
    <a-image id="play" src="#i-play" width="1" height="1" position="0 0.000 -2" rotation="0 0 0" visible="false"></a-image>
	<a-image id="carrefour" src="#logo" width="2" height="1" position="-7.0 0.6 -2" rotation="0 90 0" visible="true"></a-image>
	<a-image id="our-wine" src="#wine" width="2" height="1" position="-0.745 5.216 8.217" rotation="0 180 0" visible="true"></a-image>
	<a-image id="visite-titre" src="#visite" width="2" height="1" position="7 5 -0.5" rotation="0 -90 0" visible="true"></a-image>
	
	<!-- Video 360Â° -->
    <a-image id="drone" src="#i-drone" width="4" height="6" position="0 10 0" rotation="90 0 0" set-image="on: click; target: #fond; src: #v-drone">
	  <a-animation attribute="material.opacity" begin="mouseenter" from="0.7" to="1" dur="300"></a-animation>
      <a-animation attribute="material.opacity" begin="mouseleave" from="1" to="0.7" dur="300"></a-animation>
	</a-image>

  <!-- video interview  -->
  <a-video id="interview" src="#v-interview" width="16" height="9" position="0 2 -10" visible="false"></a-video>

    <!-- Curved image {onclick} skybox change-->
	<a-curvedimage id="curve1" class="link" src="#i-360-1-black" height="1" radius="6" theta-length="20" rotation="0 83.996 0" scale="4 4 2" position="2.739 5 1.5" opacity="0.7"
      event-set__1="_event: mouseenter; src: #i-360-1" event-set__2="_event: mouseleave; src: #i-360-1-black"
      set-image="on: click; target: #fond; src: #i-360-1">
      <a-animation attribute="material.opacity" begin="mouseenter" from="0.7" to="1" dur="300"></a-animation>
      <a-animation attribute="material.opacity" begin="mouseleave" from="1" to="0.7" dur="300"></a-animation>
    </a-curvedimage>
    <a-curvedimage id="curve2" class="link" src="#i-360-2-black" height="1" radius="6" theta-length="20" rotation="0 83.996 0" scale="4 4 2" position="2.739 0 1.5" opacity="0.7"
        event-set__1="_event: mouseenter; src: #i-360-2" event-set__2="_event: mouseleave; src: #i-360-2-black"
      set-image="on: click; target: #fond; src: #i-360-2">
      <a-animation attribute="material.opacity" begin="mouseenter" from="0.7" to="1" dur="300"></a-animation>
      <a-animation attribute="material.opacity" begin="mouseleave" from="1" to="0.7" dur="300"></a-animation>
    </a-curvedimage>
    <a-curvedimage id="curve3" class="link" src="#i-360-3-black" height="1" radius="6" theta-length="20" rotation="0 83.996 0" scale="4 4 2" position="2.739 -5 1.5" opacity="0.7"
      event-set__1="_event: mouseenter; src: #i-360-3" event-set__2="_event: mouseleave; src: #i-360-3-black"
      set-image="on: click; target: #fond; src: #i-360-3">
      <a-animation attribute="material.opacity" begin="mouseenter" from="0.7" to="1" dur="300"></a-animation>
      <a-animation attribute="material.opacity" begin="mouseleave" from="1" to="0.7" dur="300"></a-animation>
    </a-curvedimage>
    <!-- Camera -->
  <a-entity id="camera" camera mouse-cursor look-controls position="0 1 0" rotation="0 90 0">
    <a-image id="popupbouteille1" src="#popup1" width="1.1" height="1.7" position="0 0 -1" visible="false"></a-image>
    <a-image id="popupbouteille2" src="#popup2" width="1.1" height="1.7" position="0 0 -1" visible="false"></a-image>
    <a-image id="closePopup1" src="#close1" width="0.07" height="0.07" position="0.4 0.63 -0.8" visible="false"></a-image>
    <a-image id="closePopup2" src="#close2" width="0.07" height="0.07" position="0.4 0.63 -0.8" visible="false"></a-image>
    <a-entity position="0 0 -1"
      scale=".065 .065 .065"
            geometry="primitive: ring; radiusOuter: 0.30;
      radiusInner: 0.20;"
      material="color: red; shader: flat"
      cursor="maxDistance: 30; fuse: true">
      <a-animation begin="fusing" easing="ease-in" attribute="scale"
        fill="forwards" from=".02 .02 .02" to="0.065 0.065 0.065" dur="1500"></a-animation>
        </a-entity>
    </a-entity>
  </a-scene>

  <script type="text/javascript">
  var vid = document.getElementById('v-drone');

    document.querySelector('#curve1').addEventListener('click', function() {
      document.querySelector('#curve1').setAttribute('visible', 'false');
        document.querySelector('#curve2').setAttribute('visible', 'true');
        document.querySelector('#curve3').setAttribute('visible', 'true');
        document.querySelector('#vigneron').setAttribute('visible', 'false');
        document.querySelector('#bouteille1').setAttribute('visible', 'false');
        document.querySelector('#bouteille-2').setAttribute('visible', 'false');
	      document.querySelector('#bouteille-3').setAttribute('visible', 'false');
	      document.querySelector('#carrefour').setAttribute('visible', 'false');
	      document.querySelector('#our-wine').setAttribute('visible', 'false');
	      document.querySelector('#visite-titre').setAttribute('visible', 'false');
		  document.querySelector('#back').setAttribute('visible', 'true');
        document.querySelector('#cadreBottles').setAttribute('visible', 'false');
      });
    document.querySelector('#curve2').addEventListener('click', function() {
        document.querySelector('#curve1').setAttribute('visible', 'true');
        document.querySelector('#curve2').setAttribute('visible', 'false');
        document.querySelector('#curve3').setAttribute('visible', 'true');
        document.querySelector('#vigneron').setAttribute('visible', 'false');
        document.querySelector('#bouteille1').setAttribute('visible', 'false');
        document.querySelector('#bouteille-2').setAttribute('visible', 'false');
		    document.querySelector('#bouteille-3').setAttribute('visible', 'false');
	      document.querySelector('#carrefour').setAttribute('visible', 'false');
	      document.querySelector('#our-wine').setAttribute('visible', 'false');
	      document.querySelector('#visite-titre').setAttribute('visible', 'false');
			document.querySelector('#back').setAttribute('visible', 'true');
        document.querySelector('#cadreBottles').setAttribute('visible', 'false');
      });
    document.querySelector('#curve3').addEventListener('click', function() {
        document.querySelector('#curve1').setAttribute('visible', 'true');
        document.querySelector('#curve2').setAttribute('visible', 'true');
        document.querySelector('#curve3').setAttribute('visible', 'false');
        document.querySelector('#vigneron').setAttribute('visible', 'false');
        document.querySelector('#bouteille1').setAttribute('visible', 'false');
        document.querySelector('#bouteille-2').setAttribute('visible', 'false');
		document.querySelector('#bouteille-3').setAttribute('visible', 'false');
		document.querySelector('#carrefour').setAttribute('visible', 'false');
		document.querySelector('#our-wine').setAttribute('visible', 'false');
		document.querySelector('#visite-titre').setAttribute('visible', 'false');

        document.querySelector('#back').setAttribute('visible', 'true');
        document.querySelector('#cadreBottles').setAttribute('visible', 'false');
      });
    document.querySelector('#back').addEventListener('click', function() {
        document.querySelector('#curve1').setAttribute('visible', 'true');
        document.querySelector('#curve2').setAttribute('visible', 'true');
        document.querySelector('#curve3').setAttribute('visible', 'true');
        document.querySelector('#vigneron').setAttribute('visible', 'true');
        document.querySelector('#bouteille1').setAttribute('visible', 'true');
        document.querySelector('#bouteille-2').setAttribute('visible', 'true');
		document.querySelector('#bouteille-3').setAttribute('visible', 'true');
		document.querySelector('#carrefour').setAttribute('visible', 'true');
		document.querySelector('#our-wine').setAttribute('visible', 'true');
		document.querySelector('#visite-titre').setAttribute('visible', 'true');
        document.querySelector('#interview').setAttribute('visible', 'false');
        document.querySelector('#back').setAttribute('visible', 'false');
        document.querySelector('#cadreBottles').setAttribute('visible', 'true');
      });
  	document.querySelector('#drone').addEventListener('click', function() {
        document.querySelector('#curve1').setAttribute('visible', 'false');
        document.querySelector('#curve2').setAttribute('visible', 'false');
        document.querySelector('#curve3').setAttribute('visible', 'false');
        document.querySelector('#vigneron').setAttribute('visible', 'false');
        document.querySelector('#bouteille1').setAttribute('visible', 'false');
        document.querySelector('#bouteille-2').setAttribute('visible', 'false');
	    document.querySelector('#bouteille-3').setAttribute('visible', 'false');
		document.querySelector('#carrefour').setAttribute('visible', 'false');
		document.querySelector('#our-wine').setAttribute('visible', 'false');
		document.querySelector('#visite-titre').setAttribute('visible', 'false');	
		document.querySelector('#cadreBottles').setAttribute('visible', 'false');
        document.querySelector('#back').setAttribute('visible', 'true');
        document.querySelector('#interview').setAttribute('visible', 'false');
        document.querySelector('#play').setAttribute('visible', 'true');
      });
    document.querySelector('#bouteille1').addEventListener('click', function() {
        document.querySelector('#popupbouteille1').setAttribute('visible', 'true');
        document.querySelector('#closePopup1').setAttribute('visible', 'true');
        document.querySelector('#popupbouteille2').setAttribute('visible', 'false');
        document.querySelector('#closePopup2').setAttribute('visible', 'false');
    });
    document.querySelector('#bouteille-2').addEventListener('click', function() {
        document.querySelector('#popupbouteille1').setAttribute('visible', 'false');
        document.querySelector('#closePopup1').setAttribute('visible', 'false');
        document.querySelector('#popupbouteille2').setAttribute('visible', 'true');
        document.querySelector('#closePopup2').setAttribute('visible', 'true');
    });
    document.querySelector('#bouteille-3').addEventListener('click', function() {
        document.querySelector('#popupbouteille1').setAttribute('visible', 'true');
        document.querySelector('#closePopup1').setAttribute('visible', 'true');
        document.querySelector('#popupbouteille2').setAttribute('visible', 'false');
        document.querySelector('#closePopup2').setAttribute('visible', 'false');
    });
    document.querySelector('#closePopup1').addEventListener('click', function() {
        document.querySelector('#popupbouteille1').setAttribute('visible', 'false');
        document.querySelector('#closePopup1').setAttribute('visible', 'false');
        document.querySelector('#popupbouteille2').setAttribute('visible', 'false');
        document.querySelector('#closePopup2').setAttribute('visible', 'false');
    });
    document.querySelector('#closePopup2').addEventListener('click', function() {
        document.querySelector('#popupbouteille1').setAttribute('visible', 'false');
        document.querySelector('#closePopup1').setAttribute('visible', 'false');
        document.querySelector('#popupbouteille2').setAttribute('visible', 'false');
        document.querySelector('#closePopup2').setAttribute('visible', 'false');
    });
     document.querySelector('#vigneron').addEventListener('click', function() {
        document.querySelector('#curve1').setAttribute('visible', 'false');
        document.querySelector('#curve2').setAttribute('visible', 'false');
        document.querySelector('#curve3').setAttribute('visible', 'false');
        document.querySelector('#vigneron').setAttribute('visible', 'false');
        document.querySelector('#bouteille1').setAttribute('visible', 'false');
        document.querySelector('#bouteille-2').setAttribute('visible', 'false');
		document.querySelector('#bouteille-3').setAttribute('visible', 'false');
		document.querySelector('#carrefour').setAttribute('visible', 'false');
		document.querySelector('#our-wine').setAttribute('visible', 'false');
		document.querySelector('#visite-titre').setAttribute('visible', 'false');
        document.querySelector('#interview').setAttribute('visible', 'true');
        document.querySelector('#back').setAttribute('visible', 'true');
      });
document.querySelector('#play').addEventListener('click', function(e){
  document.querySelector('#play').setAttribute('visible', 'false');
  vid.play();

}, false);
    </script>
</body>
</html>
